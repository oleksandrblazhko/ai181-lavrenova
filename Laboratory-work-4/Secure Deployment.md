# Огляд практики безпеки

Одним із останніх етапів доставки захищеного програмного забезпечення є забезпечення безпеки та цілісності розроблених програм, які не порушуються під час розгортання. Практика безпечного розгортання (SD) фокусується на цьому. З цією метою перший потік практики зосереджений на усуненні ручних помилок шляхом максимальної автоматизації процесу розгортання та встановлення його успіху в залежності від результатів інтегрованої перевірки безпеки. Він також сприяє розподілу обов’язків, покладаючи на відповідальних за розгортання осіб, які не є розробниками.

Другий потік виходить за рамки механізму розгортання та зосереджується на захисті конфіденційності та цілісності конфіденційних даних, таких як паролі, маркери та інші секрети, необхідні для роботи програм у робочих середовищах. У своїй найпростішій формі відповідні виробничі секрети переміщуються зі сховищ і конфігураційних файлів у належним чином керовані цифрові сховища. У більш просунутих формах секрети динамічно генеруються під час розгортання, а рутинні процеси виявляють і пом’якшують присутність будь-яких незахищених секретів у середовищі.


## Огляд потоків
### Потік А - Процес розгортання
Повторюваний і послідовний процес розгортання гарантує, що ви розгортаєте лише правильні артефакти програмного забезпечення у виробництві. Це також прокладає шлях до репрезентативних тестових середовищ перед виробництвом.
### Потік Б - Секретне управління
Оскільки для безпечного виконання будь-якої програмної системи потрібні облікові дані, цей потік забезпечує належну обробку цих конфіденційних елементів даних у середовищі організації.

## Потік А - Процес розгортання
#### Рівень зрілості 1
### Вигода
Обмежений ризик людської помилки під час процесу розгортання мінімізація проблем безпеки 
### Діяльність
Визначте процес розгортання на всіх етапах, розбиваючи його на набір чітких інструкцій, які повинні виконуватися людиною або автоматизованим інструментом. Визначення процесу розгортання має описувати весь процес від кінця до кінця, щоб його можна було послідовно виконувати кожного разу для отримання того самого результату. Визначення зберігається централізовано та доступне для всього відповідного персоналу. Не зберігайте та не поширюйте кілька копій, деякі з яких можуть застаріти. Розгортайте додатки у виробництві або за допомогою автоматизованого процесу, або вручну персоналом, окрім розробників. Переконайтеся, що розробникам не потрібен прямий доступ до виробничого середовища для розгортання програми.
Перегляньте будь-які інструменти розгортання, переконавшись, що вони активно підтримуються постачальниками та оновлюються за допомогою виправлень безпеки. Зміцніть конфігурацію кожного інструменту, щоб вона відповідала інструкціям постачальника та найкращим галузевим практикам. З огляду на те, що більшість із цих інструментів потребують доступу до виробничого середовища, їхня безпека є надзвичайно важливою. Забезпечте цілісність самих інструментів і робочих процесів, які вони дотримуються, і налаштуйте правила доступу до цих інструментів відповідно до принципу найменших привілеїв. Нехай персонал, який має доступ до виробничого середовища, пройшов принаймні мінімальний рівень навчання або сертифікації, щоб переконатися в його компетентності в цьому питанні.
#### Рівень зрілості 2
### Вигода
Ефективний процес розгортання з інтегрованими засобами безпеки
### Діяльність
Автоматизуйте процес розгортання, щоб охопити різні етапи, щоб не було необхідності виконувати кроки конфігурації вручну та усунути ризик ізольованих людських помилок. Переконайтеся, що розгортання узгоджено на всіх етапах. Інтегруйте автоматичні перевірки безпеки в процес розгортання, напр. за допомогою тестування безпеки динамічного аналізу (DAST) і інструментів сканування вразливостей. Також перевірте цілісність розгорнутих артефактів, де це має сенс. Реєструйте результати цих тестів централізовано та виконуйте всі необхідні дії. Переконайтеся, що у разі виявлення будь-яких дефектів відповідний персонал буде повідомлено автоматично. У разі виявлення будь-яких проблем, що перевищують заздалегідь визначену критичність, призупиніть або скасуйте розгортання автоматично або запровадьте окремий робочий процес затвердження вручну, щоб це рішення було записано з поясненням винятку. Облік і аудит усіх розгортань на всіх етапах. Майте систему для реєстрації кожного розгортання, включаючи інформацію про те, хто його проводив, версію програмного забезпечення, яке було розгорнуто, і будь-які відповідні змінні, характерні для розгортання.

#### Рівень зрілості 3
### Вигода
Гарантована цілісність артефактів, які розгортаються у виробництві
### Діяльність
Скористайтеся перевагами підпису двійкових файлів під час збірки та включіть автоматичну перевірку цілісності програмного забезпечення, яке розгортається, перевіряючи їхні підписи за довіреними сертифікатами. Це може включати двійкові файли, розроблені та створені власними силами, а також сторонні артефакти. Не розгортайте артефакти, якщо їх підписи неможливо перевірити, включно з недійсними або простроченими сертифікатами. Якщо список довірених сертифікатів включає сторонніх розробників, періодично перевіряйте їх і тримайте їх у відповідності до ширшого керівництва організації щодо довірених сторонніх постачальників. Вручну підтвердьте розгортання принаймні один раз під час автоматичного розгортання. Якщо під час процесу розгортання перевірка людиною значно точніша за автоматизовану, вибирайте цей варіант.

## Потік Б - Секретне управління
#### Рівень зрілості 1
### Вигода
Визначений і обмежений доступ до ваших секретів виробництва
### Діяльність
Розробники не повинні мати доступу до секретів або облікових даних для робочих середовищ. Майте механізм для належного захисту виробничих секретів, наприклад, (i) за допомогою спеціальних осіб, які додають їх до відповідних конфігураційних файлів після розгортання (принцип поділу обов’язків) або (ii) шляхом попереднього шифрування виробничих секретів, що містяться у файлах конфігурації. . Не використовуйте виробничі секрети у файлах конфігурації для середовищ розробки чи тестування, оскільки такі середовища можуть мати значно нижчий рівень безпеки. Так само не зберігайте секрети незахищеними у файлах конфігурації, що зберігаються в сховищах коду. Постійно зберігайте конфіденційні облікові дані та секрети для робочих систем із шифруванням у спокої. Розгляньте можливість використання для цього спеціального інструменту. Керуйте ключами обережно, щоб лише персонал, відповідальний за розгортання виробництва, мав доступ до цих даних.
#### Рівень зрілості 2
### Вигода
Виявлення можливого витоку секретів виробництва
### Діяльність
Майте автоматизований процес додавання облікових даних і секретів до файлів конфігурації під час процесу розгортання на відповідних етапах. Таким чином розробники та розгортачі не бачать і не обробляють ці конфіденційні значення. Реалізуйте перевірки, які виявляють наявність секретів у сховищах коду та файлах, і запускайте їх періодично. Налаштуйте інструменти для пошуку відомих рядків і невідомих рядків з високою ентропією. У таких системах, як сховища коду, де є історія, включіть версії в перевірки. Позначте потенційні секрети, які ви виявите, як конфіденційні цінності та видаліть їх, де це необхідно. Якщо ви не можете видалити їх із файлу історії в сховищі коду, наприклад, вам може знадобитися оновити значення в системі, яка споживає секрет. Таким чином, якщо зловмисник виявить секрет, він не стане для нього корисним. Зробіть систему, яка використовується для зберігання та обробки секретів і облікових даних, надійною з точки зору безпеки. Шифруйте всі секрети під час спокою та під час передачі. Користувачі, які налаштовують цю систему та секрети, які вона містить, підпадають під дію принципу найменших привілеїв. Наприклад, розробнику може знадобитися керувати секретами для середовища розробки, але не для перевірки прийнятності користувачем або робочого середовища.
#### Рівень зрілості 3
### Вигода
Зведена до мінімуму можливість і своєчасне виявлення зловживань виробничою таємницею
### Діяльність
Впроваджуйте керування життєвим циклом для секретів виробництва та забезпечте генерацію нових секретів, наскільки це можливо, і для кожного екземпляра програми. Використання секретів для кожного екземпляра програми гарантує, що несподівана поведінка програми може бути відстежена та належним чином проаналізована. Інструменти можуть допомогти в автоматичному та непомітному оновленні секретів у всіх відповідних місцях після зміни. Переконайтеся, що всі доступи до секретів (як для читання, так і для запису) реєструються в центральній інфраструктурі. Регулярно переглядайте ці журнали, щоб виявити несподівану поведінку та провести належний аналіз, щоб зрозуміти, чому це сталося. Додайте проблеми та основні причини до практики управління дефектами, щоб переконатися, що організація вирішить будь-які неприйнятні ситуації.
